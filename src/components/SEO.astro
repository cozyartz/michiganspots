---
interface Props {
  title: string;
  description: string;
  canonical?: string;
  image?: string;
  type?: 'website' | 'article';
  publishedTime?: string;
  modifiedTime?: string;
  keywords?: string;
}

const {
  title,
  description,
  canonical = Astro.url.href,
  image = '/mispots_opt.png',
  type = 'website',
  publishedTime,
  modifiedTime,
  keywords = 'Michigan, discovery game, treasure hunt, local business, chamber of commerce, Reddit, community games, Michigan tourism, hidden gems, challenges, badges'
} = Astro.props;

const siteName = 'Michigan Spots';
const twitterHandle = '@michiganspots';
const fullImageUrl = new URL(image, Astro.site || 'https://michiganspots.com').href;
const logoUrl = 'https://michiganspots.com/MiSpot_logo.png';

// Structured Data for Organization
const organizationSchema = {
  "@context": "https://schema.org",
  "@type": "Organization",
  "name": "Michigan Spots",
  "alternateName": "Cozyartz Media Group",
  "url": "https://michiganspots.com",
  "logo": logoUrl,
  "description": "A community-powered discovery game celebrating Michigan's hidden gems through challenges, badges, and friendly competition.",
  "foundingDate": "2025",
  "foundingLocation": {
    "@type": "Place",
    "address": {
      "@type": "PostalAddress",
      "addressLocality": "Battle Creek",
      "addressRegion": "MI",
      "addressCountry": "US"
    }
  },
  "contactPoint": {
    "@type": "ContactPoint",
    "contactType": "Customer Service",
    "email": "hello@michiganspots.com",
    "availableLanguage": "English"
  },
  "sameAs": [
    "https://www.reddit.com/r/michiganspots/",
    "https://github.com/cozyartz/michiganspots"
  ]
};

// Structured Data for Website
const websiteSchema = {
  "@context": "https://schema.org",
  "@type": "WebSite",
  "name": "Michigan Spots",
  "url": "https://michiganspots.com",
  "description": "Discover Michigan's hidden gems through community-powered exploration and friendly competition.",
  "potentialAction": {
    "@type": "SearchAction",
    "target": "https://michiganspots.com/search?q={search_term_string}",
    "query-input": "required name=search_term_string"
  }
};

// Structured Data for Local Business
const localBusinessSchema = {
  "@context": "https://schema.org",
  "@type": "LocalBusiness",
  "name": "Michigan Spots",
  "image": logoUrl,
  "description": "Community-powered discovery game platform for Michigan",
  "address": {
    "@type": "PostalAddress",
    "addressLocality": "Battle Creek",
    "addressRegion": "MI",
    "addressCountry": "US"
  },
  "geo": {
    "@type": "GeoCoordinates",
    "latitude": 42.3211,
    "longitude": -85.1797
  },
  "url": "https://michiganspots.com",
  "telephone": "",
  "priceRange": "Free",
  "areaServed": {
    "@type": "State",
    "name": "Michigan"
  }
};

// FAQ Schema for homepage
const faqSchema = {
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": [
    {
      "@type": "Question",
      "name": "What is Michigan Spots?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Michigan Spots is a free, community-powered discovery game where Michiganders discover, share, and compete to find hidden gems across the state. From secret hiking trails to local diners, every corner of Michigan has stories waiting to be discovered."
      }
    },
    {
      "@type": "Question",
      "name": "When does Michigan Spots launch?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Michigan Spots launches in October 2025. Sign up now for early access to challenges, badges, and exclusive community events."
      }
    },
    {
      "@type": "Question",
      "name": "Is Michigan Spots free to play?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Yes! Michigan Spots is completely free to play. No purchase or payment is required. Digital badges and leaderboard rankings have no monetary value. Participation involves skill-based discovery and community voting."
      }
    },
    {
      "@type": "Question",
      "name": "How do Chamber partnerships work?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Chambers of Commerce can sponsor themed challenges promoting local businesses and attractions. Partnership tiers start at $299/quarter for Launch Partner, $599/quarter for City Champion, and $1,999/quarter for Regional Leader coverage."
      }
    },
    {
      "@type": "Question",
      "name": "Can local businesses participate?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Yes! Local businesses can sponsor challenges through affordable packages: Single Challenge ($99), Seasonal Package ($249), Multi-Location ($149), or Event Promotion ($199). All packages include profile pages, analytics, and community exposure."
      }
    }
  ]
};

// Breadcrumb Schema
const breadcrumbSchema = {
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": "Home",
      "item": "https://michiganspots.com"
    }
  ]
};

// Game/Software Application Schema
const gameApplicationSchema = {
  "@context": "https://schema.org",
  "@type": "WebApplication",
  "name": "Michigan Spots",
  "applicationCategory": "GameApplication",
  "applicationSubCategory": "Location-Based Game",
  "operatingSystem": "Web Browser, iOS, Android",
  "offers": {
    "@type": "Offer",
    "price": "0",
    "priceCurrency": "USD"
  },
  "aggregateRating": {
    "@type": "AggregateRating",
    "ratingValue": "5.0",
    "reviewCount": "1",
    "bestRating": "5"
  },
  "image": logoUrl,
  "screenshot": fullImageUrl,
  "description": "Discover Michigan's hidden gems through community-powered exploration, challenges, and friendly competition. Free to play Reddit-based discovery game.",
  "url": "https://michiganspots.com",
  "browserRequirements": "Requires JavaScript. Requires HTML5.",
  "softwareVersion": "1.0",
  "availableOnDevice": "Desktop, Mobile, Tablet",
  "featureList": [
    "Location-based challenges",
    "Community voting",
    "Digital badges and achievements",
    "City leaderboards",
    "Photo proof submission",
    "Reddit integration",
    "Fraud detection",
    "Real-time analytics"
  ],
  "countriesSupported": "US",
  "inLanguage": "en-US"
};

// Launch Event Schema
const launchEventSchema = {
  "@context": "https://schema.org",
  "@type": "Event",
  "name": "Michigan Spots Launch",
  "description": "Official launch of Michigan Spots - a community-powered discovery game celebrating Michigan's hidden gems",
  "startDate": "2025-10-01T00:00:00-04:00",
  "endDate": "2025-10-31T23:59:59-04:00",
  "eventStatus": "https://schema.org/EventScheduled",
  "eventAttendanceMode": "https://schema.org/OnlineEventAttendanceMode",
  "location": {
    "@type": "VirtualLocation",
    "url": "https://michiganspots.com"
  },
  "image": logoUrl,
  "organizer": {
    "@type": "Organization",
    "name": "Michigan Spots",
    "url": "https://michiganspots.com"
  },
  "offers": {
    "@type": "Offer",
    "url": "https://michiganspots.com",
    "price": "0",
    "priceCurrency": "USD",
    "availability": "https://schema.org/InStock",
    "validFrom": "2025-01-01T00:00:00-04:00"
  },
  "isAccessibleForFree": true
};

// Video Game Schema for better gaming discoverability
const videoGameSchema = {
  "@context": "https://schema.org",
  "@type": "VideoGame",
  "name": "Michigan Spots",
  "description": "Community-powered treasure hunt and discovery game for Michigan",
  "genre": ["Location-based game", "Treasure hunt", "Social game"],
  "gamePlatform": ["Web browser", "Mobile web"],
  "numberOfPlayers": {
    "@type": "QuantitativeValue",
    "minValue": 1,
    "maxValue": 1000000
  },
  "playMode": "MultiPlayer",
  "image": logoUrl,
  "author": {
    "@type": "Organization",
    "name": "Cozyartz Media Group"
  }
};

// Service Area Schema - Michigan Coverage
const serviceAreaSchema = {
  "@context": "https://schema.org",
  "@type": "Service",
  "name": "Michigan Spots Discovery Game",
  "serviceType": "Location-Based Gaming Platform",
  "provider": {
    "@type": "Organization",
    "name": "Michigan Spots"
  },
  "areaServed": [
    {
      "@type": "City",
      "name": "Detroit",
      "containedInPlace": {
        "@type": "State",
        "name": "Michigan"
      }
    },
    {
      "@type": "City",
      "name": "Grand Rapids",
      "containedInPlace": {
        "@type": "State",
        "name": "Michigan"
      }
    },
    {
      "@type": "City",
      "name": "Ann Arbor",
      "containedInPlace": {
        "@type": "State",
        "name": "Michigan"
      }
    },
    {
      "@type": "City",
      "name": "Battle Creek",
      "containedInPlace": {
        "@type": "State",
        "name": "Michigan"
      }
    },
    {
      "@type": "City",
      "name": "Lansing",
      "containedInPlace": {
        "@type": "State",
        "name": "Michigan"
      }
    },
    {
      "@type": "City",
      "name": "Kalamazoo",
      "containedInPlace": {
        "@type": "State",
        "name": "Michigan"
      }
    },
    {
      "@type": "City",
      "name": "Traverse City",
      "containedInPlace": {
        "@type": "State",
        "name": "Michigan"
      }
    },
    {
      "@type": "City",
      "name": "Marquette",
      "containedInPlace": {
        "@type": "State",
        "name": "Michigan"
      }
    },
    {
      "@type": "State",
      "name": "Michigan",
      "containedInPlace": {
        "@type": "Country",
        "name": "United States"
      }
    }
  ],
  "availableChannel": {
    "@type": "ServiceChannel",
    "serviceUrl": "https://michiganspots.com",
    "serviceType": "Online Platform"
  }
};
---

<!-- Primary Meta Tags -->
<title>{title}</title>
<meta name="title" content={title} />
<meta name="description" content={description} />
<meta name="keywords" content={keywords} />
<link rel="canonical" href={canonical} />

<!-- Robots and Indexing -->
<meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1" />
<meta name="googlebot" content="index, follow" />
<meta name="bingbot" content="index, follow" />
<meta name="perplexitybot" content="index, follow" />

<!-- Open Graph / Facebook -->
<meta property="og:type" content={type} />
<meta property="og:url" content={canonical} />
<meta property="og:title" content={title} />
<meta property="og:description" content={description} />
<meta property="og:image" content={fullImageUrl} />
<meta property="og:image:width" content="1200" />
<meta property="og:image:height" content="630" />
<meta property="og:image:alt" content={title} />
<meta property="og:site_name" content={siteName} />
<meta property="og:locale" content="en_US" />
{publishedTime && <meta property="article:published_time" content={publishedTime} />}
{modifiedTime && <meta property="article:modified_time" content={modifiedTime} />}

<!-- Twitter Card -->
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:site" content={twitterHandle} />
<meta name="twitter:creator" content={twitterHandle} />
<meta name="twitter:url" content={canonical} />
<meta name="twitter:title" content={title} />
<meta name="twitter:description" content={description} />
<meta name="twitter:image" content={fullImageUrl} />
<meta name="twitter:image:alt" content={title} />

<!-- Additional Meta Tags -->
<meta name="author" content="Cozyartz Media Group" />
<meta name="publisher" content="Michigan Spots" />
<meta name="theme-color" content="#9B7B7B" />
<meta name="msapplication-TileColor" content="#9B7B7B" />

<!-- Geographic Tags -->
<meta name="geo.region" content="US-MI" />
<meta name="geo.placename" content="Michigan" />
<meta name="geo.position" content="42.3211;-85.1797" />
<meta name="ICBM" content="42.3211, -85.1797" />

<!-- JSON-LD Structured Data -->
<script type="application/ld+json" set:html={JSON.stringify(organizationSchema)} />
<script type="application/ld+json" set:html={JSON.stringify(websiteSchema)} />
<script type="application/ld+json" set:html={JSON.stringify(localBusinessSchema)} />
<script type="application/ld+json" set:html={JSON.stringify(faqSchema)} />
<script type="application/ld+json" set:html={JSON.stringify(breadcrumbSchema)} />
<script type="application/ld+json" set:html={JSON.stringify(gameApplicationSchema)} />
<script type="application/ld+json" set:html={JSON.stringify(launchEventSchema)} />
<script type="application/ld+json" set:html={JSON.stringify(videoGameSchema)} />
<script type="application/ld+json" set:html={JSON.stringify(serviceAreaSchema)} />
