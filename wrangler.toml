name = "michiganspot"
compatibility_date = "2024-10-14"
compatibility_flags = ["nodejs_compat"]

pages_build_output_dir = "dist"

[[d1_databases]]
binding = "DB"
database_name = "michiganspot-db"
database_id = "3e7a780d-0058-43af-9e17-96d7925843b3"

# R2 Bucket for Legal Documents (PDFs)
[[r2_buckets]]
binding = "R2"
bucket_name = "michigan-spots-legal-documents"

# NOTE: Cron triggers are configured via Cloudflare Dashboard for Pages Functions
# Schedule: 0 3 * * * (daily at 3 AM UTC for auto-refund check)

[vars]
SITE_URL = "http://localhost:4321"

# Stripe Price IDs - fill these in after running setup-stripe-products.ts
STRIPE_PRICE_CHAMBER_LAUNCH = ""
STRIPE_PRICE_CHAMBER_CITY = ""
STRIPE_PRICE_CHAMBER_REGIONAL = ""
STRIPE_PRICE_BUSINESS_SINGLE = ""
STRIPE_PRICE_BUSINESS_SEASONAL = ""
STRIPE_PRICE_BUSINESS_MULTI_LOCATION = ""
STRIPE_PRICE_BUSINESS_EVENT = ""
STRIPE_PRICE_COMMUNITY_MINIMAL = ""
STRIPE_PRICE_COMMUNITY_MODEST = ""

# NOTE: Add these as secrets via Cloudflare Dashboard or wrangler:
# npx wrangler secret put STRIPE_SECRET_KEY --env production
# npx wrangler secret put STRIPE_WEBHOOK_SECRET --env production

[env.production]
[env.production.vars]
SITE_URL = "https://michiganspots.com"

# Production Stripe Price IDs (Live Mode)
STRIPE_PRICE_CHAMBER_LAUNCH = "price_1SIZGVDvXMGG1EhcOqSaShrg"
STRIPE_PRICE_CHAMBER_CITY = "price_1SIZGVDvXMGG1EhcZOEbNeAT"
STRIPE_PRICE_CHAMBER_REGIONAL = "price_1SIZGWDvXMGG1EhcHjzu3yHx"
STRIPE_PRICE_BUSINESS_SINGLE = "price_1SIZGWDvXMGG1EhcSlmMOwzG"
STRIPE_PRICE_BUSINESS_SEASONAL = "price_1SIZGXDvXMGG1EhcxcO5l4ZS"
STRIPE_PRICE_BUSINESS_MULTI_LOCATION = "price_1SIZGXDvXMGG1Ehct4FTWZLi"
STRIPE_PRICE_BUSINESS_EVENT = "price_1SIZGYDvXMGG1Ehci4wAmMJI"
STRIPE_PRICE_COMMUNITY_MINIMAL = "price_1SIZGYDvXMGG1EhcG2ZFgJz4"
STRIPE_PRICE_COMMUNITY_MODEST = "price_1SIZGZDvXMGG1Ehc8KoEW1Jh"

[[env.production.d1_databases]]
binding = "DB"
database_name = "michiganspot-db"
database_id = "3e7a780d-0058-43af-9e17-96d7925843b3"

[[env.production.r2_buckets]]
binding = "R2"
bucket_name = "michigan-spots-legal-documents"
