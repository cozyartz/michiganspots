name = "michiganspot"
compatibility_date = "2024-10-14"
compatibility_flags = ["nodejs_compat"]

pages_build_output_dir = "dist"

[[d1_databases]]
binding = "DB"
database_name = "michiganspot-db"
database_id = "3e7a780d-0058-43af-9e17-96d7925843b3"

# R2 Bucket for Legal Documents (PDFs)
[[r2_buckets]]
binding = "R2"
bucket_name = "michigan-spots-legal-documents"

# NOTE: Cron triggers are configured via Cloudflare Dashboard for Pages Functions
# Schedule: 0 3 * * * (daily at 3 AM UTC for auto-refund check)

[vars]
SITE_URL = "http://localhost:4321"
STRIPE_PUBLISHABLE_KEY = "pk_live_51SQcd8RBOZWADDgwfw120F4UUrSDpd38EgHiNPWvqxHqO8Znzdspi8Dn2NlCpwzk8nxquS6WtIhmfPPgsO4rIedi00qksEHPEe"

# Partnership Tier Price IDs - Updated November 6, 2025 (MichiganSpots Stripe Account)
# Spot Partner
STRIPE_PRICE_SPOT_MONTHLY = "price_1SQcyRRBOZWADDgwLZZr5RZZ"
STRIPE_PRICE_SPOT_QUARTERLY = "price_1SQcypRBOZWADDgwPxFKp9YG"
STRIPE_PRICE_SPOT_YEARLY = "price_1SQcypRBOZWADDgwev52m2Jk"

# Featured Partner
STRIPE_PRICE_FEATURED_QUARTERLY = "price_1SQczkRBOZWADDgwbiGbeJG5"
STRIPE_PRICE_FEATURED_YEARLY = "price_1SQczkRBOZWADDgwEIQEmtvJ"

# Premium Sponsor
STRIPE_PRICE_PREMIUM_QUARTERLY = "price_1SQd07RBOZWADDgw1w4GIxIB"
STRIPE_PRICE_PREMIUM_YEARLY = "price_1SQd08RBOZWADDgwmJzAeHQ4"

# Title Sponsor
STRIPE_PRICE_TITLE_QUARTERLY = "price_1SQd0XRBOZWADDgwzxJgD4yg"
STRIPE_PRICE_TITLE_YEARLY = "price_1SQd0XRBOZWADDgwVWUZHrm4"

# Chamber Partnership
STRIPE_PRICE_CHAMBER_QUARTERLY = "price_1SQd0sRBOZWADDgwCKQ0aIUf"
STRIPE_PRICE_CHAMBER_YEARLY = "price_1SQd0tRBOZWADDgwKd1RoR6Q"

# Directory Advertising Tiers - Business Directory (Not game-related)
# Created: November 2025
# Note: FREE tier has no Stripe price (it's free)
STRIPE_PRICE_DIRECTORY_STARTER_MONTHLY = "price_1SR0QERBOZWADDgwvWIoqgLE"
STRIPE_PRICE_DIRECTORY_GROWTH_MONTHLY = "price_1SR0SURBOZWADDgwrwOFHuQ8"
STRIPE_PRICE_DIRECTORY_PRO_MONTHLY = "price_1SR0SXRBOZWADDgwCJpEDnQl"

# NOTE: Add these as secrets via Cloudflare Dashboard or wrangler:
# npx wrangler secret put STRIPE_SECRET_KEY --env production
# npx wrangler secret put STRIPE_WEBHOOK_SECRET --env production
# npx wrangler secret put EVALIDATE_API_KEY --env production
#
# For Cloudflare Pages deployment, add these secrets in the Cloudflare Dashboard:
# 1. Go to Workers & Pages > michiganspot > Settings > Environment Variables
# 2. Add production secrets:
#    - STRIPE_SECRET_KEY (from Stripe Dashboard)
#    - STRIPE_WEBHOOK_SECRET (from Stripe Dashboard)
#    - EVALIDATE_API_KEY (from https://evalidate.andrea-b56.workers.dev)

[env.production]
[env.production.vars]
SITE_URL = "https://michiganspots.com"
STRIPE_PUBLISHABLE_KEY = "pk_live_51SQcd8RBOZWADDgwfw120F4UUrSDpd38EgHiNPWvqxHqO8Znzdspi8Dn2NlCpwzk8nxquS6WtIhmfPPgsO4rIedi00qksEHPEe"

# Production Stripe Price IDs (Live Mode) - Updated November 6, 2025 (MichiganSpots Stripe Account)
# Spot Partner
STRIPE_PRICE_SPOT_MONTHLY = "price_1SQcyRRBOZWADDgwLZZr5RZZ"
STRIPE_PRICE_SPOT_QUARTERLY = "price_1SQcypRBOZWADDgwPxFKp9YG"
STRIPE_PRICE_SPOT_YEARLY = "price_1SQcypRBOZWADDgwev52m2Jk"

# Featured Partner
STRIPE_PRICE_FEATURED_QUARTERLY = "price_1SQczkRBOZWADDgwbiGbeJG5"
STRIPE_PRICE_FEATURED_YEARLY = "price_1SQczkRBOZWADDgwEIQEmtvJ"

# Premium Sponsor
STRIPE_PRICE_PREMIUM_QUARTERLY = "price_1SQd07RBOZWADDgw1w4GIxIB"
STRIPE_PRICE_PREMIUM_YEARLY = "price_1SQd08RBOZWADDgwmJzAeHQ4"

# Title Sponsor
STRIPE_PRICE_TITLE_QUARTERLY = "price_1SQd0XRBOZWADDgwzxJgD4yg"
STRIPE_PRICE_TITLE_YEARLY = "price_1SQd0XRBOZWADDgwVWUZHrm4"

# Chamber Partnership
STRIPE_PRICE_CHAMBER_QUARTERLY = "price_1SQd0sRBOZWADDgwCKQ0aIUf"
STRIPE_PRICE_CHAMBER_YEARLY = "price_1SQd0tRBOZWADDgwKd1RoR6Q"

# Directory Advertising Tiers - Business Directory (Not game-related)
STRIPE_PRICE_DIRECTORY_STARTER_MONTHLY = "price_1SR0QERBOZWADDgwvWIoqgLE"
STRIPE_PRICE_DIRECTORY_GROWTH_MONTHLY = "price_1SR0SURBOZWADDgwrwOFHuQ8"
STRIPE_PRICE_DIRECTORY_PRO_MONTHLY = "price_1SR0SXRBOZWADDgwCJpEDnQl"

[[env.production.d1_databases]]
binding = "DB"
database_name = "michiganspot-db"
database_id = "3e7a780d-0058-43af-9e17-96d7925843b3"

[[env.production.r2_buckets]]
binding = "R2"
bucket_name = "michigan-spots-legal-documents"
