name = "michiganspot"
compatibility_date = "2024-10-14"
compatibility_flags = ["nodejs_compat"]

pages_build_output_dir = "dist"

[[d1_databases]]
binding = "DB"
database_name = "michiganspot-db"
database_id = "3e7a780d-0058-43af-9e17-96d7925843b3"

# R2 Bucket for Legal Documents (PDFs)
[[r2_buckets]]
binding = "R2"
bucket_name = "michigan-spots-legal-documents"

# NOTE: Cron triggers are configured via Cloudflare Dashboard for Pages Functions
# Schedule: 0 3 * * * (daily at 3 AM UTC for auto-refund check)

[vars]
SITE_URL = "http://localhost:4321"

# Partnership Tier Price IDs - Updated October 21, 2025
# Spot Partner
STRIPE_PRICE_SPOT_MONTHLY = "price_1SKhogDvXMGG1EhcxMgxpZUu"
STRIPE_PRICE_SPOT_QUARTERLY = "price_1SKhogDvXMGG1Ehcp9DhxRcm"
STRIPE_PRICE_SPOT_YEARLY = "price_1SKhohDvXMGG1Ehc2scd38Ea"

# Featured Partner
STRIPE_PRICE_FEATURED_QUARTERLY = "price_1SKhohDvXMGG1EhcnXnBkmul"
STRIPE_PRICE_FEATURED_YEARLY = "price_1SKhoiDvXMGG1EhcvSxkR4DC"

# Premium Sponsor
STRIPE_PRICE_PREMIUM_QUARTERLY = "price_1SKhojDvXMGG1EhcCTdgRAeJ"
STRIPE_PRICE_PREMIUM_YEARLY = "price_1SKhojDvXMGG1EhcoodFdwk8"

# Title Sponsor
STRIPE_PRICE_TITLE_QUARTERLY = "price_1SKhokDvXMGG1EhcFkjWOZ2f"
STRIPE_PRICE_TITLE_YEARLY = "price_1SKhokDvXMGG1EhcstFEhIao"

# Chamber Partnership
STRIPE_PRICE_CHAMBER_QUARTERLY = "price_1SKholDvXMGG1Ehc4n0z7m2h"
STRIPE_PRICE_CHAMBER_YEARLY = "price_1SKholDvXMGG1Ehc7uc4P4zN"

# NOTE: Add these as secrets via Cloudflare Dashboard or wrangler:
# npx wrangler secret put STRIPE_SECRET_KEY --env production
# npx wrangler secret put STRIPE_WEBHOOK_SECRET --env production

[env.production]
[env.production.vars]
SITE_URL = "https://michiganspots.com"

# Production Stripe Price IDs (Live Mode) - Updated October 21, 2025
# Spot Partner
STRIPE_PRICE_SPOT_MONTHLY = "price_1SKhogDvXMGG1EhcxMgxpZUu"
STRIPE_PRICE_SPOT_QUARTERLY = "price_1SKhogDvXMGG1Ehcp9DhxRcm"
STRIPE_PRICE_SPOT_YEARLY = "price_1SKhohDvXMGG1Ehc2scd38Ea"

# Featured Partner
STRIPE_PRICE_FEATURED_QUARTERLY = "price_1SKhohDvXMGG1EhcnXnBkmul"
STRIPE_PRICE_FEATURED_YEARLY = "price_1SKhoiDvXMGG1EhcvSxkR4DC"

# Premium Sponsor
STRIPE_PRICE_PREMIUM_QUARTERLY = "price_1SKhojDvXMGG1EhcCTdgRAeJ"
STRIPE_PRICE_PREMIUM_YEARLY = "price_1SKhojDvXMGG1EhcoodFdwk8"

# Title Sponsor
STRIPE_PRICE_TITLE_QUARTERLY = "price_1SKhokDvXMGG1EhcFkjWOZ2f"
STRIPE_PRICE_TITLE_YEARLY = "price_1SKhokDvXMGG1EhcstFEhIao"

# Chamber Partnership
STRIPE_PRICE_CHAMBER_QUARTERLY = "price_1SKholDvXMGG1Ehc4n0z7m2h"
STRIPE_PRICE_CHAMBER_YEARLY = "price_1SKholDvXMGG1Ehc7uc4P4zN"

[[env.production.d1_databases]]
binding = "DB"
database_name = "michiganspot-db"
database_id = "3e7a780d-0058-43af-9e17-96d7925843b3"

[[env.production.r2_buckets]]
binding = "R2"
bucket_name = "michigan-spots-legal-documents"
